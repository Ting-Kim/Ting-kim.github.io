# [JPA] 연관관계 매핑 기초

김영한 님의 '자바 ORM 표준 JPA 프로그래밍 - 기본편' 강의 中

## 객체와 관계형 데이터베이스 모델링의 차이

<외래 키로 조인을 사용해서 연관된 테이블을 찾는 테이블>과<br>
<참조를 사용해서 연관된 객체를 찾는 객체> 사이의 큰 간격을 인지하는 것이 중요..!<br>
아래 두개의 코드 블럭을 통해 차이를 느낄 수 있다.

```java
/**
    객체를 테이블에 맞추어서 모델링 했을 경우
*/

@Entity
public class Member {
    @Id @GeneratedValue
    private Long id;
    @Column(name = "USERNAME")
    private String name;
    @Column(name = "TEAM_ID")
    private Long teamId;
    …
    }
    @Entity
    public class Team {
    @Id @GeneratedValue
    private Long id;
    private String name;
    …
}

/**
    메인 메서드
*/
//팀 저장
Team team = new Team();
team.setName("TeamA");
em.persist(team);
//회원 저장
Member member = new Member();
member.setName("member1");
member.setTeamId(team.getId());
em.persist(member);

//조회
Member findMember = em.find(Member.class, member.getId());
Long findTeamId = findMember.getTeamId();
//연관관계가 없음
Team findTeam = em.find(Team.class, findTeamId);

```

```java
@Entity
public class Member {
    @Id @GeneratedValue
    private Long id;
    @Column(name = "USERNAME")
    private String name;
    private int age;
    // @Column(name = "TEAM_ID")
    // private Long teamId;
    @ManyToOne
    @JoinColumn(name = "TEAM_ID")
    private Team team;
    …
}

/* 메인 메서드 */

//팀 저장
Team team = new Team();
team.setName("TeamA");
em.persist(team);
//회원 저장
Member member = new Member();
member.setName("member1");
member.setTeam(team); //단방향 연관관계 설정, 참조 저장
em.persist(member);

//조회
Member findMember = em.find(Member.class, member.getId());
//참조를 사용해서 연관관계 조회
Team findTeam = findMember.getTeam();
```

## 단방향 연관관계

- @ManyToOne
- @JoinColumn("TEAM_ID")

<hr>

참고하면 좋을 책

- '객체지향 설계의 목표는 자율적인 객체들의 협력 공동체를 만드는 것이다' - 객체지향의 사실과 오해, 조영호 저
